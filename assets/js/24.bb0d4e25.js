(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{306:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"分析器模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分析器模块"}},[t._v("#")]),t._v(" 分析器模块")]),t._v(" "),s("p",[t._v("源码： "),s("code",[t._v("server/analyser/")])]),t._v(" "),s("p",[t._v("依据 gameRecords 模块记录的信息（即 Game 实例）进行分析，给出一些操作结果 (operations)。")]),t._v(" "),s("p",[s("strong",[t._v("注：")]),t._v(" 暂时使用 "),s("a",{attrs:{href:"https://github.com/EndlessCheng/mahjong-helper",target:"_blank",rel:"noopener noreferrer"}},[t._v("EndlessCheng/mahjong-helper"),s("OutboundLink")],1),t._v(" 包装了一个初级分析器。效果不如机器学习的模型。希望有能力的开发者写出更有力的分析器模块。")]),t._v(" "),s("h2",{attrs:{id:"输入输出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输入输出"}},[t._v("#")]),t._v(" 输入输出")]),t._v(" "),s("p",[t._v("输入：")]),t._v(" "),s("ul",[s("li",[t._v("game.round (即 Game 实例中的当前 Round 实例，记录了当前牌桌。只读。)")]),t._v(" "),s("li",[t._v("吃碰杠目标牌（"),s("em",[t._v("可能需要")]),t._v("）。")])]),t._v(" "),s("p",[t._v("输出：JSON 格式，表示操作结果。")]),t._v(" "),s("h2",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),s("h3",{attrs:{id:"analyser-类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#analyser-类"}},[t._v("#")]),t._v(" "),s("code",[t._v("Analyser")]),t._v(" 类")]),t._v(" "),s("p",[s("code",[t._v("Analyser")]),t._v(" 类须继承 "),s("code",[t._v("BaseAnalyser")]),t._v(" 类（"),s("code",[t._v("/server/types/Analyser.ts")]),t._v("），即必须包含如下的方法：")]),t._v(" "),s("p",[t._v("(注："),s("code",[t._v("Tile")]),t._v(" 类型即 '1p' '2m' '3z' 等，请参考 "),s("code",[t._v("server/types/General.ts")]),t._v(")")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseAnalyser")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分析舍张")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - choice：表示舍张")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - info：无实际意义，可输出作为用户参考")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyseDiscard")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("round"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" choice"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Tile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分析吃")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - targetTile：表示要吃的那张牌（即别人打出的）")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - choice：表示是否副露")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - info：无实际意义，可输出作为用户参考")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyseChi")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("round"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" targetTile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Tile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" choice"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分析碰")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - targetTile：表示要碰的那张牌（即别人打出的）")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - choice：表示是否副露")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - info：无实际意义，可输出作为用户参考")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analysePeng")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("round"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" targetTile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Tile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" choice"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分析普通杠")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - targetTile：表示要杠的那张牌（即别人打出的）")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - choice：表示是否副露")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - info：无实际意义，可输出作为用户参考")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyseGang")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("round"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" targetTile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Tile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" choice"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分析暗杠")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - targetTile：表示要杠的那张牌")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - choice：表示是否暗杠")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - info：无实际意义，可输出作为用户参考")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyseAnGang")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("round"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" targetTile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Tile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" choice"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分析加杠")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - targetTile：表示要杠的那张牌")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - choice：表示是否加杠")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - info：无实际意义，可输出作为用户参考")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyseAddGang")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("round"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" targetTile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Tile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" choice"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分析立直")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - choice：表示是否立直")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - discard：立直宣言牌")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - info：无实际意义，可输出作为用户参考")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyseLiqi")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("round"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" choice"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" discard"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Tile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分析是否选择荣和")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - choice：表示是否选择荣和")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - info：无实际意义，可输出作为用户参考")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyseHule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("round"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" choice"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分析是否选择自摸")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - choice：表示是否选择自摸")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - info：无实际意义，可输出作为用户参考")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyseZimo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("round"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" choice"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分析是否选择拔北")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - choice：表示是否选择拔北")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// - info：无实际意义，可输出作为用户参考")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyseBabei")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("round"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" choice"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);